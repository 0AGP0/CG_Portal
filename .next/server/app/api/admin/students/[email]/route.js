"use strict";(()=>{var e={};e.id=4813,e.ids=[4813],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},24961:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{GET:()=>u,PUT:()=>d});var s=a(32190),n=a(5069),o=a(86481),i=e([n]);async function d(e,{params:t}){try{let a=decodeURIComponent(t.email),r=await e.json();if(o.vF.info("\xd6ğrenci g\xfcncelleme isteği:",{email:a,body:r}),!r.name||!r.email)return s.NextResponse.json({error:"Ad ve e-posta alanları zorunludur"},{status:400});let i=await n.dz.connect();try{let e=`
        UPDATE students
        SET 
          name = $1,
          phone = $2,
          stage = $3,
          updated_at = NOW()
        WHERE email = $4
        RETURNING *
      `,t=await i.query(e,[r.name,r.phone||"",r.stage||"Hazırlık Aşaması",a]);if(0===t.rows.length)return s.NextResponse.json({error:"\xd6ğrenci bulunamadı"},{status:404});let n=t.rows[0],o=`
        SELECT name FROM advisors WHERE email = $1
      `,d=await i.query(o,[n.advisor_email]),u=d.rows.length>0?d.rows[0].name:"Atanmadı";return s.NextResponse.json({success:!0,student:{id:n.email,name:n.name,email:n.email,phone:n.phone,advisor:u,status:n.stage,processStarted:n.process_started,createdAt:n.created_at,updatedAt:n.updated_at}})}finally{i.release()}}catch(e){return o.vF.error("\xd6ğrenci g\xfcncelleme hatası:",e),s.NextResponse.json({error:"\xd6ğrenci g\xfcncellenirken bir hata oluştu",details:e.message},{status:500})}}async function u(e,{params:t}){try{let e=decodeURIComponent(t.email),a=await n.dz.connect();try{let t=`
        SELECT * FROM students WHERE email = $1
      `,r=await a.query(t,[e]);if(0===r.rows.length)return s.NextResponse.json({error:"\xd6ğrenci bulunamadı"},{status:404});let n=r.rows[0];return s.NextResponse.json({success:!0,student:{id:n.email,name:n.name,email:n.email,phone:n.phone,advisor:n.advisor_email,status:n.stage,processStarted:n.process_started,createdAt:n.created_at,updatedAt:n.updated_at}})}finally{a.release()}}catch(e){return o.vF.error("\xd6ğrenci detay hatası:",e),s.NextResponse.json({error:"\xd6ğrenci detayları alınırken bir hata oluştu",details:e.message},{status:500})}}n=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},39698:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{patchFetch:()=>u,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var s=a(96559),n=a(48088),o=a(37719),i=a(24961),d=e([i]);i=(d.then?(await d)():d)[0];let l=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/students/[email]/route",pathname:"/api/admin/students/[email]",filename:"route",bundlePath:"app/api/admin/students/[email]/route"},resolvedPagePath:"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\api\\admin\\students\\[email]\\route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:m}=l;function u(){return(0,o.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}r()}catch(e){r(e)}})},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{e.exports=import("pg")}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4447,580,8033],()=>a(39698));module.exports=r})();