"use strict";(()=>{var e={};e.id=3438,e.ids=[3438],e.modules={3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10416:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{GET:()=>d,POST:()=>u});var r=a(32190),n=a(5069),i=a(86481),o=e([n]);async function d(e){try{i.vF.info("Admin \xf6ğrenci listesi isteği alındı");let e=(await (0,n.Y)()).map(e=>({id:e.email,name:e.name,email:e.email,phone:e.phone||"",advisor:e.advisor_name||"Atanmadı",status:e.stage||"Beklemede",processStarted:e.process_started||!1,createdAt:e.created_at,updatedAt:e.updated_at,advisorId:e.advisor_id,advisorEmail:e.advisor_email,salesId:e.sales_id,salesName:e.sales_name,salesEmail:e.sales_email,documents:e.documents||[]})),t=new Headers;return t.set("Content-Type","application/json; charset=utf-8"),t.set("Cache-Control","no-store, no-cache, must-revalidate"),i.vF.info("Admin \xf6ğrenci listesi başarıyla getirildi",{studentCount:e.length}),new r.NextResponse(JSON.stringify({success:!0,students:e},null,2),{status:200,headers:t})}catch(e){return i.vF.error("Admin \xf6ğrenci listesi hatası:",e),r.NextResponse.json({error:"\xd6ğrenci listesi alınırken bir hata oluştu"},{status:500,headers:{"Content-Type":"application/json; charset=utf-8"}})}}async function u(e){try{let t=await e.json();if(!t.email||!t.name)return r.NextResponse.json({error:"Ad ve e-posta alanları zorunludur"},{status:400});if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email))return r.NextResponse.json({error:"Ge\xe7erli bir e-posta adresi girin"},{status:400});let a=await (0,n.s5)({email:t.email,name:t.name,phone:t.phone||"",stage:"Hazırlık Aşaması",process_started:!1,advisor_id:void 0,advisor_name:void 0,advisor_email:void 0,documents:[]});return i.vF.info("Yeni \xf6ğrenci oluşturuldu",{email:a.email}),r.NextResponse.json({success:!0,student:{id:a.email,name:a.name,email:a.email,phone:a.phone,advisor:a.advisor_name||"Atanmadı",status:a.stage,processStarted:a.process_started,createdAt:a.created_at,updatedAt:a.updated_at}},{status:201})}catch(e){return i.vF.error("\xd6ğrenci oluşturma hatası:",e),r.NextResponse.json({error:"\xd6ğrenci oluşturulurken bir hata oluştu"},{status:500})}}n=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})},10846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25168:(e,t,a)=>{a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{patchFetch:()=>u,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var r=a(96559),n=a(48088),i=a(37719),o=a(10416),d=e([o]);o=(d.then?(await d)():d)[0];let l=new r.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/admin/students/route",pathname:"/api/admin/students",filename:"route",bundlePath:"app/api/admin/students/route"},resolvedPagePath:"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\api\\admin\\students\\route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:m}=l;function u(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}s()}catch(e){s(e)}})},29294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{e.exports=import("pg")}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[4447,580,8033],()=>a(25168));module.exports=s})();