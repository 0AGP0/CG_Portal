(()=>{var e={};e.id=5774,e.ids=[5774],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12224:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(65239),a=r(48088),n=r(88170),l=r.n(n),i=r(30893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d={children:["",{children:["advisor",{children:["students",{children:["[email]",{children:["documents",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,78326)),"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\students\\[email]\\documents\\page.tsx"]}]},{}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\students\\[email]\\documents\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/advisor/students/[email]/documents/page",pathname:"/advisor/students/[email]/documents",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22117:(e,t,r)=>{Promise.resolve().then(r.bind(r,83492))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70873:(e,t,r)=>{"use strict";r.d(t,{KZ:()=>i,Ow:()=>o,Q4:()=>d});var s=r(5077),a=r(18780);r(49463);var n=r(12135);let l=async(e,t)=>{try{let r={"Content-Type":"application/json"};t&&(r["x-user-email"]=t);let s=await fetch(e,{headers:r});if(!s.ok){let e=await s.json();throw Error(e.error||"Veri getirme hatası")}return s.json()}catch(e){throw n.vF.error("Fetcher hatası:",e),e}};function i(e=3e4){let{user:t}=(0,a.A)(),r=!!t?.email,{data:o,error:d,isLoading:c,isValidating:u,mutate:m}=(0,s.Ay)(r?"/api/messages/unread":null,e=>l(e,t?.email),{refreshInterval:e,revalidateOnFocus:!0,revalidateIfStale:!0,dedupingInterval:5e3,onError:e=>{n.vF.error("Okunmamış mesaj sayısı getirme hatası:",e)}});return{unreadCount:o?.unreadCount||0,isLoading:c,isError:d,isValidating:u,mutate:m}}function o(e=3e4){let{user:t}=(0,a.A)(),r=!!(t?.email&&t?.role==="advisor"),{data:i,error:d,isLoading:c,isValidating:u,mutate:m}=(0,s.Ay)(r?"/api/advisor/students":null,e=>l(e,t?.email),{refreshInterval:e,revalidateOnFocus:!1,revalidateIfStale:!0,dedupingInterval:5e3,onError:e=>{n.vF.error("\xd6ğrenci listesi getirme hatası:",e)}});return{students:i?.success?i.students:[],isLoading:c,isError:d,isValidating:u,mutate:m}}function d(e,t=1e4){let{user:r}=(0,a.A)(),n=!!(r?.email&&r?.role==="advisor"&&e),{data:i,error:o,isLoading:c,isValidating:u,mutate:m}=(0,s.Ay)(n?`/api/advisor/students/${encodeURIComponent(e)}`:null,l,{refreshInterval:t,revalidateOnFocus:!0,revalidateIfStale:!0,dedupingInterval:2e3});return{student:i,isLoading:c,isError:o,isValidating:u,mutate:m}}},78326:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\pc\\\\Downloads\\\\CG_Portal-main\\\\CG_Portal-main\\\\src\\\\app\\\\advisor\\\\students\\\\[email]\\\\documents\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\students\\[email]\\documents\\page.tsx","default")},79551:e=>{"use strict";e.exports=require("url")},83492:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(60687),a=r(43210),n=r(51750),l=r(16189),i=r(85814),o=r.n(i),d=r(96042),c=r(18780),u=r(70873);let m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},p={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},x=[{value:"kabul_belgesi",label:"Kabul Belgesi"},{value:"vize_onay",label:"Vize Onayı"},{value:"pasaport",label:"Pasaport"},{value:"dil_sertifikasi",label:"Dil Sertifikası"},{value:"diploma",label:"Diploma"},{value:"cv",label:"CV"},{value:"motivasyon_mektubu",label:"Motivasyon Mektubu"},{value:"diger",label:"Diğer"}];function h(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),{user:r,isAdvisor:i}=(0,c.A)(),h="string"==typeof e.email?decodeURIComponent(e.email):"",{student:b,isLoading:g,isError:v,mutate:y}=(0,u.Q4)(h),[f,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)({documentType:"",documentName:"",documentUrl:""}),[w,C]=(0,a.useState)(!1),[P,_]=(0,a.useState)(null),B=()=>{k({documentType:"",documentName:"",documentUrl:""})},G=async e=>{if(e.preventDefault(),!N.documentType||!N.documentName||!N.documentUrl){_({show:!0,message:"L\xfctfen t\xfcm alanları doldurun.",type:"error"}),setTimeout(()=>_(null),3e3);return}C(!0);try{_({show:!0,message:"Belge başarıyla eklendi.",type:"success"}),B(),j(!1),await y()}catch(e){_({show:!0,message:"Belge eklenirken bir hata oluştu.",type:"error"})}finally{C(!1),setTimeout(()=>_(null),3e3)}};return r&&i()?(0,s.jsx)(d.A,{children:(0,s.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>t.back(),className:"text-blue-600 mb-2 flex items-center hover:underline",children:[(0,s.jsx)("span",{className:"mr-1",children:"←"})," Geri"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-[#002757]",children:"\xd6ğrenci Belgeleri"}),b&&b.name&&(0,s.jsx)("p",{className:"text-xl text-[#ff9900] font-medium mt-1",children:b.name})]}),(0,s.jsxs)("button",{onClick:()=>{j(!f),B()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:f?"✕":"+"}),(0,s.jsx)("span",{children:f?"İptal":"Yeni Belge Ekle"})]})]}),P&&(0,s.jsx)("div",{className:`p-4 mb-6 rounded-md ${"success"===P.type?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:P.message}),f&&(0,s.jsxs)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#002757] border-b pb-2",children:"Yeni Belge Ekle"}),(0,s.jsxs)("form",{onSubmit:G,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"documentType",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Tipi ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("select",{id:"documentType",value:N.documentType,onChange:e=>k({...N,documentType:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Belge Tipi Se\xe7in"}),x.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"documentName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Adı ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"documentName",type:"text",value:N.documentName,onChange:e=>k({...N,documentName:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Belge adını girin",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"documentUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Bağlantısı ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsx)("input",{id:"documentUrl",type:"url",value:N.documentUrl,onChange:e=>k({...N,documentUrl:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"https://drive.google.com/...",required:!0}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Google Drive, Dropbox veya herhangi bir bulut depolama URL'i ekleyebilirsiniz."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{j(!1),B()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"İptal"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w,children:w?"Ekleniyor...":"Belgeyi Ekle"})]})]})]}),g&&(0,s.jsxs)("div",{className:"py-10 text-center",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mr-2"}),(0,s.jsx)("span",{className:"text-gray-500",children:"Belgeler y\xfckleniyor..."})]}),v&&(0,s.jsxs)("div",{className:"bg-red-50 text-red-800 p-6 rounded-md",children:[(0,s.jsx)("p",{className:"font-medium",children:"Belgeler y\xfcklenirken bir hata oluştu."}),(0,s.jsx)("p",{className:"mt-2",children:"L\xfctfen internet bağlantınızı kontrol edip tekrar deneyin."})]}),!g&&!v&&!b&&(0,s.jsxs)("div",{className:"bg-yellow-50 text-yellow-800 p-6 rounded-md",children:[(0,s.jsx)("p",{className:"font-medium",children:"\xd6ğrenci bulunamadı."}),(0,s.jsx)("p",{className:"mt-2",children:"Belirtilen e-posta adresine sahip bir \xf6ğrenci kaydı bulunamadı."})]}),!g&&!v&&b&&(0,s.jsxs)(n.P.div,{variants:m,initial:"hidden",animate:"visible",children:[(!b.documents||0===b.documents.length)&&(0,s.jsxs)("div",{className:"bg-gray-50 p-10 rounded-lg text-center",children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Bu \xf6ğrenciye ait belge bulunmamaktadır."}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"text-blue-600 hover:underline",children:"İlk belgeyi eklemek i\xe7in tıklayın"})]}),b.documents&&b.documents.length>0&&(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Y\xfcklenen Belgeler (",b.documents.length,")"]}),(0,s.jsx)("div",{className:"space-y-4",children:b.documents.map((e,t)=>(0,s.jsx)(n.P.div,{variants:p,className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-blue-700",children:e.documentName}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:function(e){let t=x.find(t=>t.value===e);return t?t.label:"Diğer"}(e.documentType)}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Eklenme: ",new Date(e.updatedAt).toLocaleDateString("tr-TR"),"advisor"===e.uploadedByRole?" (Danışman tarafından)":""]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("a",{href:e.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors font-medium text-sm inline-flex items-center",children:[(0,s.jsx)("span",{className:"mr-1",children:"\uD83D\uDCC4"})," G\xf6r\xfcnt\xfcle"]})})]})},`${e.documentType}-${t}`))})]})]})]})}):(0,s.jsx)(d.A,{children:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-8 bg-red-50 rounded-lg border border-red-200",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Erişim Reddedildi"}),(0,s.jsx)("p",{className:"mb-4",children:"Bu sayfaya erişmek i\xe7in danışman olarak giriş yapmalısınız."}),(0,s.jsx)(o(),{href:"/login",className:"btn-primary",children:"Giriş Sayfasına D\xf6n"})]})})})}},85669:(e,t,r)=>{Promise.resolve().then(r.bind(r,78326))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,7747,711,2755,5077,8023,6201],()=>r(12224));module.exports=s})();