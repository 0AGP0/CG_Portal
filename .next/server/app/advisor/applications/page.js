(()=>{var e={};e.id=1585,e.ids=[1585],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4812:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var a=t(65239),s=t(48088),i=t(88170),n=t.n(i),l=t(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);t.d(r,d);let o={children:["",{children:["advisor",{children:["applications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6281)),"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\applications\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\applications\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/advisor/applications/page",pathname:"/advisor/applications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6281:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\pc\\\\Downloads\\\\CG_Portal-main\\\\CG_Portal-main\\\\src\\\\app\\\\advisor\\\\applications\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\pc\\Downloads\\CG_Portal-main\\CG_Portal-main\\src\\app\\advisor\\applications\\page.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26996:(e,r,t)=>{Promise.resolve().then(t.bind(t,92095))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67316:(e,r,t)=>{Promise.resolve().then(t.bind(t,6281))},70873:(e,r,t)=>{"use strict";t.d(r,{KZ:()=>l,Ow:()=>d,Q4:()=>o});var a=t(5077),s=t(18780);t(49463);var i=t(12135);let n=async(e,r)=>{try{let t={"Content-Type":"application/json"};r&&(t["x-user-email"]=r);let a=await fetch(e,{headers:t});if(!a.ok){let e=await a.json();throw Error(e.error||"Veri getirme hatası")}return a.json()}catch(e){throw i.vF.error("Fetcher hatası:",e),e}};function l(e=3e4){let{user:r}=(0,s.A)(),t=!!r?.email,{data:d,error:o,isLoading:c,isValidating:u,mutate:m}=(0,a.Ay)(t?"/api/messages/unread":null,e=>n(e,r?.email),{refreshInterval:e,revalidateOnFocus:!0,revalidateIfStale:!0,dedupingInterval:5e3,onError:e=>{i.vF.error("Okunmamış mesaj sayısı getirme hatası:",e)}});return{unreadCount:d?.unreadCount||0,isLoading:c,isError:o,isValidating:u,mutate:m}}function d(e=3e4){let{user:r}=(0,s.A)(),t=!!(r?.email&&r?.role==="advisor"),l="/api/advisor/students";console.log("useStudents hook debug:",{user:r?{email:r.email,role:r.role}:null,shouldFetch:t,endpoint:l});let{data:o,error:c,isLoading:u,isValidating:m,mutate:x}=(0,a.Ay)(t?l:null,e=>n(e,r?.email),{refreshInterval:e,revalidateOnFocus:!0,revalidateIfStale:!0,dedupingInterval:5e3,onError:e=>{i.vF.error("\xd6ğrenci listesi getirme hatası:",e),console.error("useStudents hook error:",e)},onSuccess:e=>{console.log("useStudents hook success:",e)}}),g=o?.success?o.students:[];return console.log("useStudents hook result:",{data:o,students:g.length,isLoading:u,isError:c}),{students:g,isLoading:u,isError:c,isValidating:m,mutate:x}}function o(e,r=1e4){let{user:t}=(0,s.A)(),i=!!(t?.email&&t?.role==="advisor"&&e),{data:l,error:d,isLoading:c,isValidating:u,mutate:m}=(0,a.Ay)(i?`/api/advisor/students/${encodeURIComponent(e)}`:null,n,{refreshInterval:r,revalidateOnFocus:!0,revalidateIfStale:!0,dedupingInterval:2e3});return{student:l,isLoading:c,isError:d,isValidating:u,mutate:m}}},79551:e=>{"use strict";e.exports=require("url")},92095:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(60687),s=t(43210),i=t(51750),n=t(96042),l=t(18780),d=t(70873);function o(){let{user:e}=(0,l.A)(),{students:r}=(0,d.Ow)(),[t,o]=(0,s.useState)([]),[c,u]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!1),[b,h]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[j,f]=(0,s.useState)(""),[k,N]=(0,s.useState)({universityId:"",program:"",status:"draft",submissionDate:null,notes:"",documents:[]}),w=async()=>{try{if(!j)return void alert("L\xfctfen bir \xf6ğrenci se\xe7in");let e=c.find(e=>e.id===k.universityId);if(!e)return void alert("L\xfctfen bir \xfcniversite se\xe7in");let a=r.find(e=>e.email===j);if(!a)return void alert("Se\xe7ilen \xf6ğrenci bulunamadı");let s={id:Date.now().toString(),universityId:k.universityId||"",university:e.name,program:k.program||"",status:"draft",submissionDate:null,decisionDate:null,notes:k.notes||null,documents:[],studentEmail:j,studentName:a.name};o([...t,s]),N({universityId:"",program:"",status:"draft",submissionDate:null,notes:"",documents:[]}),f(""),p(!1)}catch(e){console.error("Başvuru oluşturma hatası:",e)}},C=e=>{v(e),h(!0)},P=async(e,r)=>{try{o(t.map(t=>t.id===e?{...t,status:r,submissionDate:"submitted"===r?new Date().toISOString().split("T")[0]:t.submissionDate}:t)),y&&y.id===e&&v({...y,status:r,submissionDate:"submitted"===r?new Date().toISOString().split("T")[0]:y.submissionDate})}catch(e){console.error("Durum g\xfcncelleme hatası:",e)}},D=e=>{switch(e){case"draft":return"Taslak";case"submitted":return"G\xf6nderildi";case"in_review":return"İncelemede";case"accepted":return"Kabul Edildi";case"rejected":return"Reddedildi";default:return e}},S=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"in_review":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800"}};return!e||m?(0,a.jsx)(n.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):"advisor"!==e.role?(0,a.jsx)(n.A,{children:(0,a.jsx)("div",{className:"bg-red-100 p-4 rounded-lg text-red-800",children:(0,a.jsx)("p",{children:"Bu sayfaya erişim izniniz bulunmamaktadır. Bu sayfa sadece danışmanlar i\xe7indir."})})}):(0,a.jsx)(n.A,{children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#002757]",children:"Başvuru Y\xf6netimi"}),(0,a.jsx)("p",{className:"text-default mt-1",children:"\xd6ğrencilerinizin \xfcniversite başvurularını buradan y\xf6netebilirsiniz."})]}),(0,a.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)("span",{children:"Yeni Başvuru"}),(0,a.jsx)("span",{className:"text-lg",children:"+"})]})]}),0===t.length?(0,a.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm p-8 rounded-lg shadow-sm border border-gray-100/60 dark:border-gray-700/30 text-center",children:[(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-4",children:"Hen\xfcz başvuru bulunmuyor."}),(0,a.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Yeni Başvuru Oluştur"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,a.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm p-6 rounded-lg shadow-sm border border-gray-100/60 dark:border-gray-700/30 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#002757] dark:text-blue-300",children:e.university}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.studentName})]}),(0,a.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(e.status)}`,children:D(e.status)})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:e.program}),e.submissionDate&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:[(0,a.jsx)("span",{className:"font-medium",children:"Başvuru Tarihi:"})," ",e.submissionDate]}),e.notes&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[(0,a.jsx)("span",{className:"font-medium",children:"Not:"})," ",e.notes]}),e.documents&&e.documents.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Belgeler:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.documents.map((e,r)=>(0,a.jsx)("span",{className:"bg-blue-100/70 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs px-2 py-1 rounded-full",children:e},r))})]}),(0,a.jsxs)("div",{className:"mt-auto pt-4 flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>C(e),className:"flex-1 py-2 px-3 bg-gray-100/70 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200/70 dark:hover:bg-gray-600/50 transition-colors text-sm",children:"Detaylar"}),"draft"===e.status&&(0,a.jsx)("button",{onClick:()=>P(e.id,"submitted"),className:"flex-1 py-2 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"G\xf6nder"})]})]},e.id))}),g&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md p-6 rounded-lg shadow-xl max-w-md w-full border border-gray-100/60 dark:border-gray-700/30",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-[#002757] dark:text-blue-300 mb-4",children:"Yeni Başvuru"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\xd6ğrenci"}),(0,a.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",children:[(0,a.jsx)("option",{value:"",children:"\xd6ğrenci Se\xe7in"}),r.map(e=>(0,a.jsx)("option",{value:e.email,children:e.name},e.email))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\xdcniversite"}),(0,a.jsxs)("select",{value:k.universityId||"",onChange:e=>N({...k,universityId:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",children:[(0,a.jsx)("option",{value:"",children:"\xdcniversite Se\xe7in"}),c.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.country,")"]},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Program"}),(0,a.jsxs)("select",{value:k.program||"",onChange:e=>N({...k,program:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",disabled:!k.universityId,children:[(0,a.jsx)("option",{value:"",children:"Program Se\xe7in"}),k.universityId&&c.find(e=>e.id===k.universityId)?.programs.map((e,r)=>(0,a.jsx)("option",{value:e,children:e},r))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notlar"}),(0,a.jsx)("textarea",{value:k.notes||"",onChange:e=>N({...k,notes:e.target.value}),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",placeholder:"İsteğe bağlı notlar..."})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200/80 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300/80 dark:hover:bg-gray-600/80 transition-colors",children:"İptal"}),(0,a.jsx)("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Oluştur"})]})]})}),b&&y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md p-6 rounded-lg shadow-xl max-w-2xl w-full border border-gray-100/60 dark:border-gray-700/30",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#002757] dark:text-blue-300",children:"Başvuru Detayları"}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white",children:"✕"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-[#002757] dark:text-blue-300",children:y.university}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:y.program}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:y.studentName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Durum"}),(0,a.jsx)("p",{className:`inline-block px-3 py-1 rounded-full text-sm ${S(y.status)}`,children:D(y.status)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Başvuru Tarihi"}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:y.submissionDate?new Date(y.submissionDate).toLocaleDateString("tr-TR"):"Hen\xfcz g\xf6nderilmedi"})]}),y.decisionDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Karar Tarihi"}),(0,a.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:new Date(y.decisionDate).toLocaleDateString("tr-TR")})]})]}),y.notes&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Notlar"}),(0,a.jsx)("p",{className:"bg-gray-50/80 dark:bg-gray-700/50 p-3 rounded-lg text-gray-700 dark:text-gray-300",children:y.notes})]}),y.documents&&y.documents.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"D\xf6k\xfcmanlar"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:y.documents.map((e,r)=>(0,a.jsx)("span",{className:"bg-blue-100/70 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm",children:e},r))})]}),"draft"===y.status&&(0,a.jsx)("div",{className:"mt-6 flex justify-end gap-3",children:(0,a.jsx)("button",{onClick:()=>{P(y.id,"submitted"),h(!1)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Başvuruyu G\xf6nder"})})]})})]})})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[4447,7747,711,2755,5077,8023,6201],()=>t(4812));module.exports=a})();