(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1585],{1007:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115),i=a(2835),l=a(4820),d=a(9576),n=a(6359);function c(){var e;let{user:t}=(0,d.A)(),{students:a}=(0,n.Ow)(),[c,o]=(0,s.useState)([]),[u,m]=(0,s.useState)([]),[x,g]=(0,s.useState)(!0),[b,h]=(0,s.useState)(!1),[y,p]=(0,s.useState)(!1),[v,j]=(0,s.useState)(null),[k,f]=(0,s.useState)(""),[N,w]=(0,s.useState)({universityId:"",program:"",status:"draft",submissionDate:null,notes:"",documents:[]});(0,s.useEffect)(()=>{let e=async()=>{g(!0);try{let e=await fetch("/api/advisor/applications",{headers:{"x-user-email":(null==t?void 0:t.email)||""}}),a=await fetch("/api/universities");if(e.ok){let t=await e.json();o(t.applications||[])}else o([{id:"1",universityId:"uni1",university:"Oxford University",program:"Business Administration",status:"submitted",submissionDate:"2023-05-15",decisionDate:null,notes:"Bekleme s\xfcresi 4-6 hafta",documents:["Transkript","Motivasyon Mektubu","CV"],studentEmail:"burcu.shut@gmail.com",studentName:"Burcu Shut"}]);if(a.ok){let e=await a.json();m(e.universities||[])}else m([{id:"uni1",name:"Oxford University",country:"İngiltere",programs:["Business Administration","Computer Science","Economics"],logo:"https://example.com/oxford-logo.png"},{id:"uni2",name:"Harvard University",country:"ABD",programs:["Business Administration","Computer Science","Law"],logo:"https://example.com/harvard-logo.png"}])}catch(e){console.error("Veri \xe7ekme hatası:",e)}finally{g(!1)}};t&&e()},[t]);let D=async()=>{try{if(!k)return void alert("L\xfctfen bir \xf6ğrenci se\xe7in");let e=u.find(e=>e.id===N.universityId);if(!e)return void alert("L\xfctfen bir \xfcniversite se\xe7in");let t=a.find(e=>e.email===k);if(!t)return void alert("Se\xe7ilen \xf6ğrenci bulunamadı");let r={id:Date.now().toString(),universityId:N.universityId||"",university:e.name,program:N.program||"",status:"draft",submissionDate:null,decisionDate:null,notes:N.notes||null,documents:[],studentEmail:k,studentName:t.name};o([...c,r]),w({universityId:"",program:"",status:"draft",submissionDate:null,notes:"",documents:[]}),f(""),h(!1)}catch(e){console.error("Başvuru oluşturma hatası:",e)}},S=e=>{j(e),p(!0)},B=async(e,t)=>{try{o(c.map(a=>a.id===e?{...a,status:t,submissionDate:"submitted"===t?new Date().toISOString().split("T")[0]:a.submissionDate}:a)),v&&v.id===e&&j({...v,status:t,submissionDate:"submitted"===t?new Date().toISOString().split("T")[0]:v.submissionDate})}catch(e){console.error("Durum g\xfcncelleme hatası:",e)}},C=e=>{switch(e){case"draft":return"Taslak";case"submitted":return"G\xf6nderildi";case"in_review":return"İncelemede";case"accepted":return"Kabul Edildi";case"rejected":return"Reddedildi";default:return e}},I=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"submitted":return"bg-blue-100 text-blue-800";case"in_review":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800"}};return!t||x?(0,r.jsx)(l.A,{children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):"advisor"!==t.role?(0,r.jsx)(l.A,{children:(0,r.jsx)("div",{className:"bg-red-100 p-4 rounded-lg text-red-800",children:(0,r.jsx)("p",{children:"Bu sayfaya erişim izniniz bulunmamaktadır. Bu sayfa sadece danışmanlar i\xe7indir."})})}):(0,r.jsx)(l.A,{children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-[#002757]",children:"Başvuru Y\xf6netimi"}),(0,r.jsx)("p",{className:"text-default mt-1",children:"\xd6ğrencilerinizin \xfcniversite başvurularını buradan y\xf6netebilirsiniz."})]}),(0,r.jsxs)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Yeni Başvuru"}),(0,r.jsx)("span",{className:"text-lg",children:"+"})]})]}),0===c.length?(0,r.jsxs)("div",{className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm p-8 rounded-lg shadow-sm border border-gray-100/60 dark:border-gray-700/30 text-center",children:[(0,r.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-300 mb-4",children:"Hen\xfcz başvuru bulunmuyor."}),(0,r.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Yeni Başvuru Oluştur"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(e=>(0,r.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white/70 dark:bg-gray-800/70 backdrop-blur-sm p-6 rounded-lg shadow-sm border border-gray-100/60 dark:border-gray-700/30 flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-[#002757] dark:text-blue-300",children:e.university}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.studentName})]}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(I(e.status)),children:C(e.status)})]}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:e.program}),e.submissionDate&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Başvuru Tarihi:"})," ",e.submissionDate]}),e.notes&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:[(0,r.jsx)("span",{className:"font-medium",children:"Not:"})," ",e.notes]}),e.documents&&e.documents.length>0&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Belgeler:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:e.documents.map((e,t)=>(0,r.jsx)("span",{className:"bg-blue-100/70 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 text-xs px-2 py-1 rounded-full",children:e},t))})]}),(0,r.jsxs)("div",{className:"mt-auto pt-4 flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>S(e),className:"flex-1 py-2 px-3 bg-gray-100/70 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200/70 dark:hover:bg-gray-600/50 transition-colors text-sm",children:"Detaylar"}),"draft"===e.status&&(0,r.jsx)("button",{onClick:()=>B(e.id,"submitted"),className:"flex-1 py-2 px-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"G\xf6nder"})]})]},e.id))}),b&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md p-6 rounded-lg shadow-xl max-w-md w-full border border-gray-100/60 dark:border-gray-700/30",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-[#002757] dark:text-blue-300 mb-4",children:"Yeni Başvuru"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\xd6ğrenci"}),(0,r.jsxs)("select",{value:k,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",children:[(0,r.jsx)("option",{value:"",children:"\xd6ğrenci Se\xe7in"}),a.map(e=>(0,r.jsx)("option",{value:e.email,children:e.name},e.email))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"\xdcniversite"}),(0,r.jsxs)("select",{value:N.universityId||"",onChange:e=>w({...N,universityId:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",children:[(0,r.jsx)("option",{value:"",children:"\xdcniversite Se\xe7in"}),u.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.name," (",e.country,")"]},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Program"}),(0,r.jsxs)("select",{value:N.program||"",onChange:e=>w({...N,program:e.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",disabled:!N.universityId,children:[(0,r.jsx)("option",{value:"",children:"Program Se\xe7in"}),N.universityId&&(null==(e=u.find(e=>e.id===N.universityId))?void 0:e.programs.map((e,t)=>(0,r.jsx)("option",{value:e,children:e},t)))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notlar"}),(0,r.jsx)("textarea",{value:N.notes||"",onChange:e=>w({...N,notes:e.target.value}),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white/90 dark:bg-gray-700/90",placeholder:"İsteğe bağlı notlar..."})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-200/80 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300/80 dark:hover:bg-gray-600/80 transition-colors",children:"İptal"}),(0,r.jsx)("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Oluştur"})]})]})}),y&&v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:(0,r.jsxs)(i.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-md p-6 rounded-lg shadow-xl max-w-2xl w-full border border-gray-100/60 dark:border-gray-700/30",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-[#002757] dark:text-blue-300",children:"Başvuru Detayları"}),(0,r.jsx)("button",{onClick:()=>p(!1),className:"text-gray-500 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white",children:"✕"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-[#002757] dark:text-blue-300",children:v.university}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:v.program}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:v.studentName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Durum"}),(0,r.jsx)("p",{className:"inline-block px-3 py-1 rounded-full text-sm ".concat(I(v.status)),children:C(v.status)})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Başvuru Tarihi"}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:v.submissionDate?new Date(v.submissionDate).toLocaleDateString("tr-TR"):"Hen\xfcz g\xf6nderilmedi"})]}),v.decisionDate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Karar Tarihi"}),(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:new Date(v.decisionDate).toLocaleDateString("tr-TR")})]})]}),v.notes&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"Notlar"}),(0,r.jsx)("p",{className:"bg-gray-50/80 dark:bg-gray-700/50 p-3 rounded-lg text-gray-700 dark:text-gray-300",children:v.notes})]}),v.documents&&v.documents.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-1",children:"D\xf6k\xfcmanlar"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:v.documents.map((e,t)=>(0,r.jsx)("span",{className:"bg-blue-100/70 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 px-3 py-1 rounded-full text-sm",children:e},t))})]}),"draft"===v.status&&(0,r.jsx)("div",{className:"mt-6 flex justify-end gap-3",children:(0,r.jsx)("button",{onClick:()=>{B(v.id,"submitted"),p(!1)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Başvuruyu G\xf6nder"})})]})})]})})}},4316:(e,t,a)=>{Promise.resolve().then(a.bind(a,1007))}},e=>{var t=t=>e(e.s=t);e.O(0,[8407,5674,4264,9042,7244,1122,5573,4820,6359,4288,7706,7544,1142,2993,1561,6867,5495,7358],()=>t(4316)),_N_E=e.O()}]);