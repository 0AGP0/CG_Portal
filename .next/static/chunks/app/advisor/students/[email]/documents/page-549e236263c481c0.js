(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5774],{6283:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>h});var a=t(5155),s=t(2115),n=t(2835),r=t(5695),i=t(6874),d=t.n(i),o=t(4820),c=t(9576),m=t(6359);let u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},x=[{value:"kabul_belgesi",label:"Kabul Belgesi"},{value:"vize_onay",label:"Vize Onayı"},{value:"pasaport",label:"Pasaport"},{value:"dil_sertifikasi",label:"Dil Sertifikası"},{value:"diploma",label:"Diploma"},{value:"cv",label:"CV"},{value:"motivasyon_mektubu",label:"Motivasyon Mektubu"},{value:"diger",label:"Diğer"}];function h(){let e=(0,r.useParams)(),l=(0,r.useRouter)(),{user:t,isAdvisor:i}=(0,c.A)(),h="string"==typeof e.email?decodeURIComponent(e.email):"",{student:p,isLoading:g,isError:y,mutate:j}=(0,m.Q4)(h),[v,f]=(0,s.useState)(!1),[N,k]=(0,s.useState)({documentType:"",documentName:"",documentUrl:""}),[w,B]=(0,s.useState)(!1),[C,D]=(0,s.useState)(null),T=()=>{k({documentType:"",documentName:"",documentUrl:""})},_=async e=>{if(e.preventDefault(),!N.documentType||!N.documentName||!N.documentUrl){D({show:!0,message:"L\xfctfen t\xfcm alanları doldurun.",type:"error"}),setTimeout(()=>D(null),3e3);return}B(!0);try{D({show:!0,message:"Belge başarıyla eklendi.",type:"success"}),T(),f(!1),await j()}catch(e){D({show:!0,message:"Belge eklenirken bir hata oluştu.",type:"error"})}finally{B(!1),setTimeout(()=>D(null),3e3)}};return t&&i()?(0,a.jsx)(o.A,{children:(0,a.jsxs)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,a.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>l.back(),className:"text-blue-600 mb-2 flex items-center hover:underline",children:[(0,a.jsx)("span",{className:"mr-1",children:"←"})," Geri"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-[#002757]",children:"\xd6ğrenci Belgeleri"}),p&&p.name&&(0,a.jsx)("p",{className:"text-xl text-[#ff9900] font-medium mt-1",children:p.name})]}),(0,a.jsxs)("button",{onClick:()=>{f(!v),T()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:v?"✕":"+"}),(0,a.jsx)("span",{children:v?"İptal":"Yeni Belge Ekle"})]})]}),C&&(0,a.jsx)("div",{className:"p-4 mb-6 rounded-md ".concat("success"===C.type?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:C.message}),v&&(0,a.jsxs)(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-white p-6 rounded-lg shadow-md mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#002757] border-b pb-2",children:"Yeni Belge Ekle"}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"documentType",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Tipi ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"documentType",value:N.documentType,onChange:e=>k({...N,documentType:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Belge Tipi Se\xe7in"}),x.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"documentName",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Adı ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"documentName",type:"text",value:N.documentName,onChange:e=>k({...N,documentName:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Belge adını girin",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"documentUrl",className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Bağlantısı ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"documentUrl",type:"url",value:N.documentUrl,onChange:e=>k({...N,documentUrl:e.target.value}),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"https://drive.google.com/...",required:!0}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Google Drive, Dropbox veya herhangi bir bulut depolama URL'i ekleyebilirsiniz."})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{f(!1),T()},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"İptal"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w,children:w?"Ekleniyor...":"Belgeyi Ekle"})]})]})]}),g&&(0,a.jsxs)("div",{className:"py-10 text-center",children:[(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500 mr-2"}),(0,a.jsx)("span",{className:"text-gray-500",children:"Belgeler y\xfckleniyor..."})]}),y&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-800 p-6 rounded-md",children:[(0,a.jsx)("p",{className:"font-medium",children:"Belgeler y\xfcklenirken bir hata oluştu."}),(0,a.jsx)("p",{className:"mt-2",children:"L\xfctfen internet bağlantınızı kontrol edip tekrar deneyin."})]}),!g&&!y&&!p&&(0,a.jsxs)("div",{className:"bg-yellow-50 text-yellow-800 p-6 rounded-md",children:[(0,a.jsx)("p",{className:"font-medium",children:"\xd6ğrenci bulunamadı."}),(0,a.jsx)("p",{className:"mt-2",children:"Belirtilen e-posta adresine sahip bir \xf6ğrenci kaydı bulunamadı."})]}),!g&&!y&&p&&(0,a.jsxs)(n.P.div,{variants:u,initial:"hidden",animate:"visible",children:[(!p.documents||0===p.documents.length)&&(0,a.jsxs)("div",{className:"bg-gray-50 p-10 rounded-lg text-center",children:[(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Bu \xf6ğrenciye ait belge bulunmamaktadır."}),(0,a.jsx)("button",{onClick:()=>f(!0),className:"text-blue-600 hover:underline",children:"İlk belgeyi eklemek i\xe7in tıklayın"})]}),p.documents&&p.documents.length>0&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Y\xfcklenen Belgeler (",p.documents.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:p.documents.map((e,l)=>(0,a.jsx)(n.P.div,{variants:b,className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-700",children:e.documentName}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:function(e){let l=x.find(l=>l.value===e);return l?l.label:"Diğer"}(e.documentType)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Eklenme: ",new Date(e.updatedAt).toLocaleDateString("tr-TR"),"advisor"===e.uploadedByRole?" (Danışman tarafından)":""]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("a",{href:e.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"px-3 py-2 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors font-medium text-sm inline-flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDCC4"})," G\xf6r\xfcnt\xfcle"]})})]})},"".concat(e.documentType,"-").concat(l)))})]})]})]})}):(0,a.jsx)(o.A,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-8 bg-red-50 rounded-lg border border-red-200",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Erişim Reddedildi"}),(0,a.jsx)("p",{className:"mb-4",children:"Bu sayfaya erişmek i\xe7in danışman olarak giriş yapmalısınız."}),(0,a.jsx)(d(),{href:"/login",className:"btn-primary",children:"Giriş Sayfasına D\xf6n"})]})})})}},7059:(e,l,t)=>{Promise.resolve().then(t.bind(t,6283))}},e=>{var l=l=>e(e.s=l);e.O(0,[8407,5674,4264,9042,7244,1122,5573,4820,6359,4288,7706,7544,1142,2993,1561,6867,5495,7358],()=>l(7059)),_N_E=e.O()}]);